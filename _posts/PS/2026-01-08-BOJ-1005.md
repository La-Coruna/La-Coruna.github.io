---
title: "[BOJ 1005] ACM Craft"
categories:
  - PS
  - BOJ
comments: true
tags:
  - dp
  - topological_sort
  - dfs
toc: true
toc_sticky: true
---
## ğŸ”—Link
{:.no-top-margin}
[ë¬¸ì œ](https://boj.kr/1005)  
[í’€ì´(dfs)](https://github.com/La-Coruna/PS/blob/main/baekjoon/1005.cpp)
[í’€ì´(ìœ„ìƒ ì •ë ¬)](https://github.com/La-Coruna/PS/blob/main/baekjoon/1005_2.cpp)

## ğŸ’¡Idea
í˜„ì¬ ê±´ë¬¼ê¹Œì§€ ì§“ëŠ” ì‹œê°„ì€, ì‚¬ì „ì— ì§€ì–´ì•¼ í•˜ëŠ” ê±´ë¬¼ë“¤ì˜ ì‹œê°„ë“¤ ì¤‘ ìµœëŒ“ê°’ê³¼ í˜„ì¬ ê±´ë¬¼ì„ ì§“ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì˜ í•©ì´ë‹¤.
í˜„ì¬ ê±´ë¬¼ê³¼ ë‹¤ìŒ ê±´ë¬¼ ì‚¬ì´ì˜ ì§“ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì— ëŒ€í•œ ì í™”ì‹ì€ ë‹¤ìŒê³¼ ê°™ê² ë‹¤.
- `times[i]`: ê±´ë¬¼ ië¥¼ ì§“ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„
- `dp[i]`: ì‚¬ì „ ê±´ë¬¼ë“¤ì„ ì§“ê³  í˜„ì¬ ê²ƒë¬¼ì„ ì§“ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„
- `dp[nxt] = max(dp[cur]) + times[nxt])`

dpë°°ì—´ì„ ì±„ìš°ëŠ” ìˆœì„œëŠ” ìœ„ìƒ ì •ë ¬ì„ ì‚¬ìš©í•´ë„ ê´œì°®ê³ , dfsë¥¼ ì‚¬ìš©í•´ë„ ê´œì°®ê² ë‹¤.

## ğŸ”‘Code
### DFS
```c++
#include <bits/stdc++.h>
using namespace std;

int dfs(int cur, const vector<int> (&adj)[1001], int *times, int* dp){
    // í˜„ì¬ ê±´ë¬¼ê¹Œì§€ ì§“ëŠ” ì‹œê°„ì„ ì•ˆë‹¤ë©´ ë°”ë¡œ ë¦¬í„´
    if(dp[cur] != -1) return dp[cur];

    // ëª¨ë¥¸ë‹¤ë©´ ê³„ì‚°
    dp[cur] = 0;
    for(int nxt: adj[cur]){
        dp[cur] = max(dp[cur], dfs(nxt, adj, times, dp));
    }
    dp[cur] += times[cur];
    
    return dp[cur];
}

int main(void){
    ios_base::sync_with_stdio(0);
    cin.tie(0);

    int T;
    cin >> T;
    while(T--){
        int N, K, W, X, Y;
        int times[1001] = {0}, dp[1001];
        fill(dp, dp+1001, -1);
        vector<int> adj_reverse[1001];
        
        // 1. input
        cin >> N >> K;
        for(int i = 1; i <= N; i++){
            cin >> times[i];
        }
        for(int i = 0; i < K; i++){
            cin >> X >> Y;
            adj_reverse[Y].emplace_back(X);
        }
        cin >> W;

        // 3. ì •ë‹µ ì¶œë ¥
        cout << dfs(W,adj_reverse,times,dp) << '\n';
    }

    return 0;
}
```

### ìœ„ìƒ ì •ë ¬
```c++
#include <bits/stdc++.h>
using namespace std;

int main(void){
    ios_base::sync_with_stdio(0);
    cin.tie(0);

    int T;
    cin >> T;
    while(T--){
        int N, K, W, X, Y;
        int times[1001] = {0}, dp[1001] = {0};
        int indegree[1001] = {0};
        fill(dp, dp+1001, -1);
        vector<int> adj[1001];
        queue<int> Q;
        
        // 1. input
        cin >> N >> K;
        for(int i = 1; i <= N; i++){
            cin >> times[i];
        }
        for(int i = 0; i < K; i++){
            cin >> X >> Y;
            adj[X].emplace_back(Y);
            indegree[Y]++;
        }
        cin >> W;

        // 2. ì²« ê±´ë¬¼ queueì— ë„£ê¸°
        for(int i = 1; i <= N; i++){
            if(indegree[i] == 0) Q.emplace(i);
            dp[i] = times[i]; // ì²« ê±´ë¬¼ë“¤ì€ ë³¸ì¸ ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ìµœì¢… ì‹œê°„
        }

        // 3. ì§€ì„ ìˆ˜ ìˆëŠ” ê±´ë¬¼ ì§€ìœ¼ë©´ì„œ dp ë°°ì—´ ì±„ìš°ê¸°
        while(!Q.empty()){
            int cur = Q.front(); Q.pop();

            for(int& nxt: adj[cur]){
                if(--indegree[nxt] == 0) Q.emplace(nxt);
                dp[nxt] = max(dp[nxt], dp[cur] + times[nxt]);
            }
        }

        // 3. ì •ë‹µ ì¶œë ¥
        cout << dp[W] << '\n';
    }

    return 0;
}
```
## ğŸ—¨ï¸ Side Notes

| ëª©ì             | ì˜¬ë°”ë¥¸ ì„ ì–¸                   |
| ------------- | ------------------------ |
| ë°°ì—´ ì „ë‹¬         | `int* arr`               |
| ë°°ì—´ ì „ë‹¬ (C ìŠ¤íƒ€ì¼) | `int arr[]`              |
| ì½ê¸° ì „ìš©         | `const int* arr`         |
| í¬ê¸°ê¹Œì§€ ë³´ì¡´       | `int (&arr)[1001]`       |
| í¬ê¸° + ì½ê¸° ì „ìš©    | `const int (&arr)[1001]` |

