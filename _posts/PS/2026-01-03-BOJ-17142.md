---
title: "[BOJ 17142] ì—°êµ¬ì†Œ 3"
categories:
  - PS
  - BOJ
comments: true
tags:
  - bfs
  - backtracking
toc: true
toc_sticky: true
---
## ğŸ”—Link
{:.no-top-margin}
[ë¬¸ì œ](https://boj.kr/17142)  
[í’€ì´](https://github.com/La-Coruna/PS/blob/main/baekjoon/17142.cpp) 
## ğŸ’¡Idea
- bfs + ë°±íŠ¸ë˜í‚¹(ì¡°í•©)
- ì—£ì§€ì¼€ì´ìŠ¤ë“¤ì„ ì˜ ê³ ë ¤í•´ì•¼ í•¨.
	- ë°±ì¤€ ì˜ˆì œì— ì¹œì ˆíˆ ë‚˜ì™€ìˆìŒ

## ğŸ”‘Code
```c++
#include <bits/stdc++.h>
using namespace std;
#define INF 0x3f3f3f3f

int N, M;
int board[51][51];
int dx[4] = {0,1,0,-1};
int dy[4] = {1,0,-1,0};
vector<pair<int,int>> vPos;
vector<bool> isSelected;
int minTime = INF;

int main(void){
    ios_base::sync_with_stdio(0);
    cin.tie(0);

    cin >> N >> M;
    for(int i = 0; i < N; i++){
        for(int j = 0; j < N; j++){
            cin >> board[i][j];
            if(board[i][j] == 2) {
                vPos.emplace_back(i,j);
                isSelected.emplace_back(0);
            }
        }
    }

    fill(isSelected.rbegin(), isSelected.rbegin()+M, 1);
    
    do{
        vector<vector<int>> vis(N, vector<int>(N,-1));
        queue<pair<int,int>> Q;

        for(int i = 0; i < vPos.size(); i++){
            if(!isSelected[i]) continue;
            auto [x,y] = vPos[i];
            vis[x][y] = 0;
            Q.emplace(x,y);
        }

        while(!Q.empty()){
            auto [curX, curY] = Q.front(); Q.pop();
            for(int i = 0; i < 4; i++){
                int nx = curX + dx[i];
                int ny = curY + dy[i];
                
                if(nx < 0 || ny < 0 || nx >= N || ny >= N) continue;
                if(vis[nx][ny] != -1 || board[nx][ny] == 1) continue;
                // ë°©ë¬¸ í–ˆì—ˆëŠ”ë°, ë” ì¼ì° ë°©ë¬¸í–ˆë˜ ê²½ìš°
                vis[nx][ny] = vis[curX][curY] + 1;
                Q.emplace(nx,ny);
            }
        }

        // ë‹¤ ì „íŒŒëëŠ”ì§€ í™•ì¸
        bool isFailed = false;
        int totalTime = 0;
        for(int i = 0; i < N; i++){
            for(int j = 0; j < N; j++){
                // ë°©ë¬¸ ì•ˆ í•œ ê³³
                if(vis[i][j] == -1) {
                    // í‹€ë ¸ë˜ ìƒê°: ë°©ë¬¸ ì•ˆ í–ˆëŠ”ë° ë²½ì´ ì•„ë‹ˆì•¼? ë°”ë¡œ ì¡°ê¸° ì¢…ë£Œ.
                    // í‹€ë ¸ë˜ ì´ìœ : ë²½ ë§ê³ ë„ ë¹„í™œì„± ë°”ì´ëŸ¬ìŠ¤ì¼ ìˆ˜ë„ ìˆìŒ. ì´ ê²½ìš°ëŠ” ì¡°ê¸° ì¢…ë£Œ í•˜ë©´ ì•ˆë¨.
                    // ì˜³ì€ ìƒê°: ë°©ë¬¸ ì•ˆí–ˆëŠ”ë°, ë°©ë¬¸í•´ì•¼ í•˜ëŠ” ê³³ì´ì•¼? ë°”ë¡œ ì¡°ê¸° ì¢…ë£Œ
                    if(board[i][j] == 0){
                        isFailed = true;
                        break;
                    }
                    continue;
                }
                // ì´ë¯¸ ë°”ì´ëŸ¬ìŠ¤ ì¹¸ì¸ ê²½ìš°ëŠ” ì‹œê°„ ê³„ì‚° X
                if(board[i][j] == 2) continue;
                totalTime = max(totalTime,vis[i][j]);
            }
            if(isFailed) break;
        }
        if(isFailed) continue;

        minTime = min(minTime,totalTime);
    }
    while(next_permutation(isSelected.begin(),isSelected.end()));

    if(minTime == INF) cout << -1;
    else cout << minTime;

    return 0;
}
```

## ğŸ—¨ï¸ Side Notes
```
- ê³ ë ¤í•˜ì§€ ëª»í–ˆë˜ ì—£ì§€ ì¼€ì´ìŠ¤
4 1
1 1 1 1
1 2 1 1
1 1 1 1
1 1 2 0
```