---
title: "[BOJ 17144] ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•!"
categories:
  - PS
  - BOJ
comments: true
tags:
  - simulation
toc: true
toc_sticky: true
---
## ğŸ”—Link
{:.no-top-margin}
[ë¬¸ì œ](https://boj.kr/17144)  
[í’€ì´](https://github.com/La-Coruna/PS/blob/main/baekjoon/17144.cpp)

## ğŸ’¡Idea
ê°„ë‹¨í•œ êµ¬í˜„ ë¬¸ì œ
## ğŸ”‘Code
```c++
/*
[ë¯¸ì„¸ë¨¼ì§€ ì•ˆë…•!] 
- date: 26.01.10
*/
#include <bits/stdc++.h>
using namespace std;

int air_purifier_top, air_purifier_bot;
int R, C, T, board[50][50], board_delta[50][50];

int dx[4] = {1,0,-1,0};
int dy[4] = {0,1,0,-1};

void reset_board_delta(){
    for(int i = 0; i < R; i++)
        fill(board_delta[i], board_delta[i] + C, 0);
    return;
}

void apply_board_delta(){
    for(int i = 0; i < R; i++){
        for(int j = 0; j < C; j++){
            board[i][j] += board_delta[i][j];
        }
    }
    return;
}

void diffuse(int x, int y){
    int density = board[x][y];
    int diff_amount = density / 5;
    int diff_cnt = 0;
    for(int i = 0; i < 4; i++){
        int nx = x + dx[i];
        int ny = y + dy[i];
        if(nx < 0 || ny < 0 || nx >= R || ny >= C) continue;
        if(ny == 0 && (nx == air_purifier_top || nx == air_purifier_bot)) continue; // ê³µê¸° ì²­ì •ê¸° ì¹¸ì´ë©´ pass
        diff_cnt++;
        board_delta[nx][ny] += diff_amount; // board_deltaëŠ” ì˜ ì´ˆê¸°í™”í•´ì„œ ì¨ì•¼ í•¨.
    }
    board_delta[x][y] -= diff_amount * diff_cnt;
    return;
}

void diffuse_all_board(){
    for(int i = 0; i < R; i++){
        for(int j = 0; j < C; j++){
            diffuse(i,j);
        }
    }
    return;
}

void purify(){
    // ìœ— ë¶€ë¶„
    // â†“
    for(int x = air_purifier_top-1; x-1 >= 0; x--){
        board[x][0] = board[x-1][0];
    }
    // â†
    for(int y = 0; y+1 < C; y++){
        board[0][y] = board[0][y+1];
    }
    // â†‘
    for(int x = 0; x+1 <= air_purifier_top; x++){
        board[x][C-1] = board[x+1][C-1];
    }
    // â†’
    for(int y = C-1; y-1 > 0; y--){
        board[air_purifier_top][y] = board[air_purifier_top][y-1];
    }
    board[air_purifier_top][1] = 0;
    // ì•„ë˜ ë¶€ë¶„
    // â†‘
    for(int x = air_purifier_bot+1; x+1 < R; x++){
        board[x][0] = board[x+1][0];
    }
    // â†
    for(int y = 0; y+1 < C; y++){
        board[R-1][y] = board[R-1][y+1];
    }
    // â†“
    for(int x = R-1; x-1 >= air_purifier_bot; x--){
        board[x][C-1] = board[x-1][C-1];
    }
    // â†’
    for(int y = C-1; y-1 > 0; y--){
        board[air_purifier_bot][y] = board[air_purifier_bot][y-1];
    }
    board[air_purifier_bot][1] = 0;
    return;
}

int get_all_dust(){
    int res = 0;
    for(int i = 0; i < R; i++){
        for(int j = 0; j < C; j++){
            res += board[i][j];
        }
    }
    return res+2; // ê³µê¸°ì²­ì •ê¸° ê°’ ì œê±°
}

int main(void){
    ios_base::sync_with_stdio(0);
    cin.tie(0);

    // board ì…ë ¥
    cin >> R >> C >> T;
    for(int i = 0; i < R; i++){
        for(int j = 0; j < C; j++){
            cin >> board[i][j];
        }
    }

    // ê³µê¸° ì²­ì •ê¸° ìœ„ì¹˜
    for(int i = 0; i < R; i++){
        if(board[i][0] == -1) {
            air_purifier_top = i;
            air_purifier_bot = i+1;
            break;
        }
    }

    // 1ì´ˆ ë£¨í‹´ ë°˜ë³µ
    while(T--){
        // 1. ë¨¼ì§€ í™•ì‚°
        reset_board_delta();
        diffuse_all_board();
        apply_board_delta();

        // 2. ê³µê¸° ì²­ì •
        purify();
    }
    
    cout << get_all_dust();

    return 0;
}
```

## ğŸ—¨ï¸ Side Notes