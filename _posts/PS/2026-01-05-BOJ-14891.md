---
title: "[BOJ 14891] í†±ë‹ˆë°”í€´"
categories:
  - PS
  - BOJ
comments: true
tags:
  - simulation
toc: true
toc_sticky: true
---
## ğŸ”—Link
{:.no-top-margin}
[ë¬¸ì œ](https://boj.kr/14891)  
[í’€ì´](https://github.com/La-Coruna/PS/blob/main/baekjoon/14891.cpp)

## ğŸ’¡Idea
- ë§ë‹¿ì€ ë¶€ë¶„ì´ ë‹¤ë¥¸ ê·¹ì´ë©´, ë‹¤ë¥¸ ë°©í–¥ìœ¼ë¡œì˜ íšŒì „ì´ ì „ë‹¬ëœë‹¤.
- 1. ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ, ì´ ì–´ë””ì„œë¶€í„° ì–´ë””ê¹Œì§€ ê·¹ì´ ì—°ê²°ë˜ëŠ”ì§€(ê°™ì´ íšŒì „í•˜ëŠ”ì§€) í™•ì¸
- 2. íšŒì „ë  í†±ë‹ˆë°”í€´ë“¤ì„ í•œë²ˆì— íšŒì „.

- ê¸°ë³¸
```c++
        0
    7       1
 (L)6       2(R)
    5       3
        4  
```

- clockwise (-1)
```c++
        7
    6       0
    5       1
    4       2
        3  
```

- counterclockwise (+1)
```c++
        1
    8       2
    7       3
    6       4
        5  
```

## ğŸ”‘Code
```c++
#include <bits/stdc++.h>
using namespace std;

struct Cogwheel{
    bool initalState[8];
    int rotationCnt = 0;

    void rotate(bool isClockwise){
        if(isClockwise) rotationCnt--;
        else rotationCnt++;
    }

    int applyRotation(int idx){
        int res = (idx + rotationCnt) % 8;
        return (res < 0) ? res + 8 : res;
    }

    bool getTopState(){
        return initalState[applyRotation(0)];
    }

    bool getRightState(){
        return initalState[applyRotation(2)];
    }

    bool getLeftState(){
        return initalState[applyRotation(6)];
    }

    Cogwheel(string state_str){
        for(int i = 0; i < 8; i++){
            initalState[i] = (state_str[i] == '1');
        }
    }

    static void rotateCogwheel(vector<Cogwheel>& cogwheels, int cogNum, bool isClockwise){
        // ì™¼ìª½ ì—°ê²°ëœ ë¶€ë¶„ì˜ ë ì°¾ê¸°
        int l = cogNum;
        for(int cur = cogNum; cur-1 >= 0; cur--){
            bool rightCogState = cogwheels[cur].getLeftState();
            bool leftCogState = cogwheels[cur-1].getRightState();
            if(rightCogState ^ leftCogState) l = cur-1;
            else break;
        }

        // ì˜¤ë¥¸ìª½ ì—°ê²°ëœ ë¶€ë¶„ì˜ ë ì°¾ê¸°
        int r = cogNum;
        for(int cur = cogNum; cur+1 <= 3; cur++){
            bool leftCogState = cogwheels[cur].getRightState();
            bool rightCogState = cogwheels[cur+1].getLeftState();
            if(rightCogState ^ leftCogState) r = cur+1;
            else break;
        }

        // l ì—ì„œì˜ íšŒì „ ë°©í–¥ ì •í•˜ê¸°
        bool isCurCogClockwise = ((cogNum - l) & 1) ? !isClockwise : isClockwise;

        // l~rê¹Œì§€ ë‹¤ íšŒì „ì‹œí‚¤ê¸°
        for(int i = l; i <= r; i++){
            cogwheels[i].rotate(isCurCogClockwise);
            isCurCogClockwise = !isCurCogClockwise;
        }
    }

    static int getScore(vector<Cogwheel>& cogwheels){
        int score = 0;
        for(int i = 0; i < 4; i++){
            if(cogwheels[i].getTopState()) score += (1 << i);
        }
        return score;
    }
};

int main(void){
    ios_base::sync_with_stdio(0);
    cin.tie(0);

    string state_str;
    vector<Cogwheel> cogwheels;
    for(int i = 0; i < 4; i++){
        cin >> state_str;
        cogwheels.emplace_back(state_str);
    }

    int K;
    cin >> K;
    for(int i = 0; i < K; i++){
        int cogNum, dir;
        cin >> cogNum >> dir;
        cogNum--; // 0-index
        Cogwheel::rotateCogwheel(cogwheels, cogNum, dir == 1);
    }    

    cout << Cogwheel::getScore(cogwheels);

    return 0;
}
```

## ğŸ—¨ï¸ Side Notes
### C++ì—ì„œ ìŒìˆ˜ `%` ì—°ì‚°ì„ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì 
c++ì—ì„œ ìŒìˆ˜ì—ì„œ `%`(mod) ì—°ì‚°ì„ ì ìš©í•  ë•Œ, ìŒìˆ˜ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ìœ ì˜í•´ì•¼ í•œë‹¤.
 
ë‹¤ìŒ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•  ë•Œ, ì£¼ì˜ê°€ í•„ìš”í–ˆë‹¤.
```c++
int applyRotation(int idx){
	int res = (idx + rotationCnt) % 8;
	return (res < 0) ? res + 8 : res;
}
```

#### C++ vs Python ë¹„êµ
Pythonì€ í•­ìƒ **0 ì´ìƒ**ì˜ ë‚˜ë¨¸ì§€ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, C++ì—ì„œëŠ” **ì™¼ìª½ í”¼ì—°ì‚°ìì˜ ë¶€í˜¸ë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€**í•œë‹¤.
- c++
```c++
cout << -3 % 8;
// ì¶œë ¥ê°’: -3
```
- python
```python
print(-3 % 8)
# ì¶œë ¥ê°’: 5
```


